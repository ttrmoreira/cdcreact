{"ast":null,"code":"var _jsxFileName = \"/Users/ttrmoreira/OneDrive/Documentos/workspace/alura/react/instalurareact/instalura/src/componentes/Foto.js\";\nimport React, { Component } from \"react\";\nimport Pubsub from 'pubsub-js';\n\nclass FotoHeader extends Component {\n  render() {\n    return React.createElement(\"header\", {\n      className: \"foto-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 8\n      },\n      __self: this\n    }, React.createElement(\"figure\", {\n      className: \"foto-usuario\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 9\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"{this.props.foto.urlFoto}\",\n      alt: \"foto do usuario\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 10\n      },\n      __self: this\n    }), React.createElement(\"figcaption\", {\n      className: \"foto-usuario\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12\n      },\n      __self: this\n    }, this.props.foto.loginUsuario))), React.createElement(\"time\", {\n      className: \"foto-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17\n      },\n      __self: this\n    }, this.props.foto.horario));\n  }\n\n}\n\nclass FotoInfo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      likers: this.props.foto.likers\n    };\n  }\n\n  componentWillMount() {\n    Pubsub.subscribe('atualiza-liker', (topico, infoLiker) => {\n      console.log(infoLiker);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"foto-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"foto-info-likes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, this.state.likers.map(liker => {\n      return React.createElement(\"a\", {\n        key: liker.login,\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, liker.login, \",\");\n    }), \"curtiram\"), React.createElement(\"p\", {\n      className: \"foto-info-legenda\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"foto-info-autor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"autor \"), this.props.foto.comentario), React.createElement(\"ul\", {\n      className: \"foto-info-comentarios\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, this.props.foto.comentarios.map(comentario => {\n      return React.createElement(\"li\", {\n        className: \"comentario\",\n        key: comentario.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"foto-info-autor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, comentario.login, \" \"), comentario.texto);\n    })));\n  }\n\n}\n\nclass FotoAtualizacoes extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      likeada: this.props.foto.likeada\n    };\n  }\n\n  like(event) {\n    event.preventDefault();\n    fetch(`http://localhost:8080/api/fotos/${this.props.foto.id}/like?X-AUTH-TOKEN=${localStorage.getItem('auth-token')}`, {\n      method: 'POST'\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error(\"Não foi possível realizar o like da foto\");\n      }\n    }).then(liker => {\n      this.setState({\n        likeada: !this.state.likeada\n      });\n      Pubsub.publish('atualiza-liker', {\n        fotoId: this.props.foto.id,\n        liker\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"fotoAtualizacoes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: this.like.bind(this),\n      className: this.state.likeada ? 'fotoAtualizacoes-like-ativo' : 'fotoAtualizacoes-like',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Linkar\"), React.createElement(\"form\", {\n      className: \"fotoAtualizacoes-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Adicione um coment\\xE1rio...\",\n      className: \"fotoAtualizacoes-form-campo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Comentar!\",\n      className: \"fotoAtualizacoes-form-submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default class FotoItem extends Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: \"foto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(FotoHeader, {\n      foto: this.props.foto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      alt: \"foto\",\n      className: \"foto-src\",\n      src: this.props.foto.urlFoto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(FotoInfo, {\n      foto: this.props.foto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(FotoAtualizacoes, {\n      foto: this.props.foto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/ttrmoreira/OneDrive/Documentos/workspace/alura/react/instalurareact/instalura/src/componentes/Foto.js"],"names":["React","Component","Pubsub","FotoHeader","render","props","foto","loginUsuario","horario","FotoInfo","constructor","state","likers","componentWillMount","subscribe","topico","infoLiker","console","log","map","liker","login","comentario","comentarios","id","texto","FotoAtualizacoes","likeada","like","event","preventDefault","fetch","localStorage","getItem","method","then","response","ok","json","Error","setState","publish","fotoId","bind","FotoItem","urlFoto"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Pubsub from 'pubsub-js';\n\n\nclass FotoHeader extends Component{\n    render(){\n        return(\n            <header className=\"foto-header\">\n            <figure className=\"foto-usuario\">\n              <img src=\"{this.props.foto.urlFoto}\" alt=\"foto do usuario\"/>\n              <figcaption className=\"foto-usuario\">\n                <a href=\"#\">\n                  {this.props.foto.loginUsuario}\n                </a>  \n              </figcaption>\n            </figure>\n        <time className=\"foto-data\">{this.props.foto.horario}</time>\n          </header>\n\n        );\n    }\n}\n\nclass FotoInfo extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = {likers:this.props.foto.likers};\n    }\n\n    componentWillMount(){\n        Pubsub.subscribe('atualiza-liker', (topico, infoLiker) => {\n            console.log(infoLiker);\n        });\n    }\n\n    render(){\n        return(\n            <div className=\"foto-info\">\n            <div className=\"foto-info-likes\">\n                {\n                    this.state.likers.map(liker => {\n                        return(<a key={liker.login} href=\"#\">{liker.login},</a>)\n                    })\n                }\n\n               curtiram\n           \n            </div>\n\n            <p className=\"foto-info-legenda\">\n              <a className=\"foto-info-autor\">autor </a>\n                {\n                    this.props.foto.comentario\n                }\n            </p>\n\n            <ul className=\"foto-info-comentarios\">\n                {\n                    this.props.foto.comentarios.map(comentario => {\n                        return ( <li className=\"comentario\" key={comentario.id}>\n                                    <a className=\"foto-info-autor\">{comentario.login} </a>\n                                        {comentario.texto}\n                                </li>\n                        );\n                    })\n                }\n            </ul>\n          </div>\n        );\n    }\n}\n\nclass FotoAtualizacoes extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = {likeada : this.props.foto.likeada};\n    }\n\n    like(event){\n        event.preventDefault();\n        fetch(`http://localhost:8080/api/fotos/${this.props.foto.id}/like?X-AUTH-TOKEN=${localStorage.getItem('auth-token')}`,{method: 'POST'})\n            .then(response => {\n                if(response.ok){\n                    return response.json();\n                }else{\n                    throw new Error (\"Não foi possível realizar o like da foto\");\n                }\n            })\n            .then(liker => {\n                this.setState({likeada : !this.state.likeada});\n                Pubsub.publish('atualiza-liker', {fotoId:this.props.foto.id, liker});\n            });\n    }\n\n    render(){\n        return(\n            <section className=\"fotoAtualizacoes\">\n            <a onClick={this.like.bind(this)} className={this.state.likeada ? 'fotoAtualizacoes-like-ativo' : 'fotoAtualizacoes-like'}>Linkar</a>\n            <form className=\"fotoAtualizacoes-form\">\n              <input type=\"text\" placeholder=\"Adicione um comentário...\" className=\"fotoAtualizacoes-form-campo\"/>\n              <input type=\"submit\" value=\"Comentar!\" className=\"fotoAtualizacoes-form-submit\"/>\n            </form>\n\n          </section>\n        );\n    }\n}\n\nexport default class FotoItem extends Component {\n    render(){\n        return (\n            <div className=\"foto\">\n                <FotoHeader foto={this.props.foto}/>\n                <img alt=\"foto\" className=\"foto-src\" src={this.props.foto.urlFoto}/>\n                <FotoInfo foto={this.props.foto}/>\n                <FotoAtualizacoes foto={this.props.foto}/>\n            </div>   \n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}