{"ast":null,"code":"var _jsxFileName = \"/Users/ttrmoreira/OneDrive/Documentos/workspace/alura/react/instalurareact/instalura/src/componentes/Foto.js\";\nimport React, { Component } from \"react\";\nimport Pubsub from 'pubsub-js';\n\nclass FotoHeader extends Component {\n  render() {\n    return React.createElement(\"header\", {\n      className: \"foto-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 8\n      },\n      __self: this\n    }, React.createElement(\"figure\", {\n      className: \"foto-usuario\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 9\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"{this.props.foto.urlFoto}\",\n      alt: \"foto do usuario\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 10\n      },\n      __self: this\n    }), React.createElement(\"figcaption\", {\n      className: \"foto-usuario\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12\n      },\n      __self: this\n    }, this.props.foto.loginUsuario))), React.createElement(\"time\", {\n      className: \"foto-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17\n      },\n      __self: this\n    }, this.props.foto.horario));\n  }\n\n}\n\nclass FotoInfo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      likers: this.props.foto.likers\n    };\n  }\n\n  componentWillMount() {\n    Pubsub.subscribe('atualiza-liker', (topico, infoLiker) => {\n      if (this.props.foto.id === infoLiker.fotoId) {\n        const possivelLiker = this.state.likers.find(liker => liker.login === infoLiker.liker.login);\n\n        if (possivelLiker === undefined) {\n          const novoLikers = this.state.likers.concat(possivelLiker);\n          this.setState({\n            likers: novoLikers\n          });\n        }\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"foto-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"foto-info-likes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, this.state.likers.map(liker => {\n      return React.createElement(\"a\", {\n        key: liker.login,\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, liker.login, \",\");\n    }), \"curtiram\"), React.createElement(\"p\", {\n      className: \"foto-info-legenda\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"foto-info-autor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"autor \"), this.props.foto.comentario), React.createElement(\"ul\", {\n      className: \"foto-info-comentarios\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, this.props.foto.comentarios.map(comentario => {\n      return React.createElement(\"li\", {\n        className: \"comentario\",\n        key: comentario.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"foto-info-autor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, comentario.login, \" \"), comentario.texto);\n    })));\n  }\n\n}\n\nclass FotoAtualizacoes extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      likeada: this.props.foto.likeada\n    };\n  }\n\n  like(event) {\n    event.preventDefault();\n    fetch(`http://localhost:8080/api/fotos/${this.props.foto.id}/like?X-AUTH-TOKEN=${localStorage.getItem('auth-token')}`, {\n      method: 'POST'\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error(\"Não foi possível realizar o like da foto\");\n      }\n    }).then(liker => {\n      this.setState({\n        likeada: !this.state.likeada\n      });\n      Pubsub.publish('atualiza-liker', {\n        fotoId: this.props.foto.id,\n        liker\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"fotoAtualizacoes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: this.like.bind(this),\n      className: this.state.likeada ? 'fotoAtualizacoes-like-ativo' : 'fotoAtualizacoes-like',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Linkar\"), React.createElement(\"form\", {\n      className: \"fotoAtualizacoes-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Adicione um coment\\xE1rio...\",\n      className: \"fotoAtualizacoes-form-campo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Comentar!\",\n      className: \"fotoAtualizacoes-form-submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default class FotoItem extends Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: \"foto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(FotoHeader, {\n      foto: this.props.foto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      alt: \"foto\",\n      className: \"foto-src\",\n      src: this.props.foto.urlFoto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(FotoInfo, {\n      foto: this.props.foto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(FotoAtualizacoes, {\n      foto: this.props.foto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/ttrmoreira/OneDrive/Documentos/workspace/alura/react/instalurareact/instalura/src/componentes/Foto.js"],"names":["React","Component","Pubsub","FotoHeader","render","props","foto","loginUsuario","horario","FotoInfo","constructor","state","likers","componentWillMount","subscribe","topico","infoLiker","id","fotoId","possivelLiker","find","liker","login","undefined","novoLikers","concat","setState","map","comentario","comentarios","texto","FotoAtualizacoes","likeada","like","event","preventDefault","fetch","localStorage","getItem","method","then","response","ok","json","Error","publish","bind","FotoItem","urlFoto"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAGA,MAAMC,UAAN,SAAyBF,SAAzB,CAAkC;AAC9BG,EAAAA,MAAM,GAAE;AACJ,WACI;AAAQ,MAAA,SAAS,EAAC,aAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAQ,MAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,GAAG,EAAC,2BAAT;AAAqC,MAAA,GAAG,EAAC,iBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAY,MAAA,SAAS,EAAC,cAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKC,KAAL,CAAWC,IAAX,CAAgBC,YADnB,CADF,CAFF,CADA,EASJ;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B,KAAKF,KAAL,CAAWC,IAAX,CAAgBE,OAA7C,CATI,CADJ;AAcH;;AAhB6B;;AAmBlC,MAAMC,QAAN,SAAuBR,SAAvB,CAAgC;AAE5BS,EAAAA,WAAW,CAACL,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKM,KAAL,GAAa;AAACC,MAAAA,MAAM,EAAC,KAAKP,KAAL,CAAWC,IAAX,CAAgBM;AAAxB,KAAb;AACH;;AAGDC,EAAAA,kBAAkB,GAAE;AAChBX,IAAAA,MAAM,CAACY,SAAP,CAAiB,gBAAjB,EAAkC,CAACC,MAAD,EAAQC,SAAR,KAAsB;AACpD,UAAG,KAAKX,KAAL,CAAWC,IAAX,CAAgBW,EAAhB,KAAuBD,SAAS,CAACE,MAApC,EAA2C;AACvC,cAAMC,aAAa,GAAG,KAAKR,KAAL,CAAWC,MAAX,CAAkBQ,IAAlB,CAAuBC,KAAK,IAAIA,KAAK,CAACC,KAAN,KAAgBN,SAAS,CAACK,KAAV,CAAgBC,KAAhE,CAAtB;;AACA,YAAGH,aAAa,KAAKI,SAArB,EAA+B;AAC3B,gBAAMC,UAAU,GAAG,KAAKb,KAAL,CAAWC,MAAX,CAAkBa,MAAlB,CAAyBN,aAAzB,CAAnB;AACA,eAAKO,QAAL,CAAc;AAACd,YAAAA,MAAM,EAACY;AAAR,WAAd;AACH;AACJ;AACJ,KARD;AASH;;AAEDpB,EAAAA,MAAM,GAAE;AACJ,WACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,KAAKO,KAAL,CAAWC,MAAX,CAAkBe,GAAlB,CAAsBN,KAAK,IAAI;AAC3B,aAAO;AAAG,QAAA,GAAG,EAAEA,KAAK,CAACC,KAAd;AAAqB,QAAA,IAAI,EAAC,GAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA+BD,KAAK,CAACC,KAArC,MAAP;AACH,KAFD,CAFR,aADA,EAYA;AAAG,MAAA,SAAS,EAAC,mBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAGQ,KAAKjB,KAAL,CAAWC,IAAX,CAAgBsB,UAHxB,CAZA,EAmBA;AAAI,MAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,KAAKvB,KAAL,CAAWC,IAAX,CAAgBuB,WAAhB,CAA4BF,GAA5B,CAAgCC,UAAU,IAAI;AAC1C,aAAS;AAAI,QAAA,SAAS,EAAC,YAAd;AAA2B,QAAA,GAAG,EAAEA,UAAU,CAACX,EAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG;AAAG,QAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgCW,UAAU,CAACN,KAA3C,MADH,EAEQM,UAAU,CAACE,KAFnB,CAAT;AAKH,KAND,CAFR,CAnBA,CADJ;AAiCH;;AAtD2B;;AAyDhC,MAAMC,gBAAN,SAA+B9B,SAA/B,CAAwC;AAEpCS,EAAAA,WAAW,CAACL,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKM,KAAL,GAAa;AAACqB,MAAAA,OAAO,EAAG,KAAK3B,KAAL,CAAWC,IAAX,CAAgB0B;AAA3B,KAAb;AACH;;AAEDC,EAAAA,IAAI,CAACC,KAAD,EAAO;AACPA,IAAAA,KAAK,CAACC,cAAN;AACAC,IAAAA,KAAK,CAAE,mCAAkC,KAAK/B,KAAL,CAAWC,IAAX,CAAgBW,EAAG,sBAAqBoB,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmC,EAA/G,EAAiH;AAACC,MAAAA,MAAM,EAAE;AAAT,KAAjH,CAAL,CACKC,IADL,CACUC,QAAQ,IAAI;AACd,UAAGA,QAAQ,CAACC,EAAZ,EAAe;AACX,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACH,OAFD,MAEK;AACD,cAAM,IAAIC,KAAJ,CAAW,0CAAX,CAAN;AACH;AACJ,KAPL,EAQKJ,IARL,CAQUnB,KAAK,IAAI;AACX,WAAKK,QAAL,CAAc;AAACM,QAAAA,OAAO,EAAG,CAAC,KAAKrB,KAAL,CAAWqB;AAAvB,OAAd;AACA9B,MAAAA,MAAM,CAAC2C,OAAP,CAAe,gBAAf,EAAiC;AAAC3B,QAAAA,MAAM,EAAC,KAAKb,KAAL,CAAWC,IAAX,CAAgBW,EAAxB;AAA4BI,QAAAA;AAA5B,OAAjC;AACH,KAXL;AAYH;;AAEDjB,EAAAA,MAAM,GAAE;AACJ,WACI;AAAS,MAAA,SAAS,EAAC,kBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAG,MAAA,OAAO,EAAE,KAAK6B,IAAL,CAAUa,IAAV,CAAe,IAAf,CAAZ;AAAkC,MAAA,SAAS,EAAE,KAAKnC,KAAL,CAAWqB,OAAX,GAAqB,6BAArB,GAAqD,uBAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,EAEA;AAAM,MAAA,SAAS,EAAC,uBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,WAAW,EAAC,8BAA/B;AAA2D,MAAA,SAAS,EAAC,6BAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,WAA3B;AAAuC,MAAA,SAAS,EAAC,8BAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAFA,CADJ;AAUH;;AAlCmC;;AAqCxC,eAAe,MAAMe,QAAN,SAAuB9C,SAAvB,CAAiC;AAC5CG,EAAAA,MAAM,GAAE;AACJ,WACI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAE,KAAKC,KAAL,CAAWC,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,GAAG,EAAC,MAAT;AAAgB,MAAA,SAAS,EAAC,UAA1B;AAAqC,MAAA,GAAG,EAAE,KAAKD,KAAL,CAAWC,IAAX,CAAgB0C,OAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,KAAK3C,KAAL,CAAWC,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,EAII,oBAAC,gBAAD;AAAkB,MAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CADJ;AAQH;;AAV2C","sourcesContent":["import React, { Component } from \"react\";\nimport Pubsub from 'pubsub-js';\n\n\nclass FotoHeader extends Component{\n    render(){\n        return(\n            <header className=\"foto-header\">\n            <figure className=\"foto-usuario\">\n              <img src=\"{this.props.foto.urlFoto}\" alt=\"foto do usuario\"/>\n              <figcaption className=\"foto-usuario\">\n                <a href=\"#\">\n                  {this.props.foto.loginUsuario}\n                </a>  \n              </figcaption>\n            </figure>\n        <time className=\"foto-data\">{this.props.foto.horario}</time>\n          </header>\n\n        );\n    }\n}\n\nclass FotoInfo extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = {likers:this.props.foto.likers};\n    }\n\n\n    componentWillMount(){\n        Pubsub.subscribe('atualiza-liker',(topico,infoLiker) => {\n            if(this.props.foto.id === infoLiker.fotoId){\n                const possivelLiker = this.state.likers.find(liker => liker.login === infoLiker.liker.login);\n                if(possivelLiker === undefined){\n                    const novoLikers = this.state.likers.concat(possivelLiker);\n                    this.setState({likers:novoLikers});\n                }\n            }\n        })\n    }\n\n    render(){\n        return(\n            <div className=\"foto-info\">\n            <div className=\"foto-info-likes\">\n                {\n                    this.state.likers.map(liker => {\n                        return(<a key={liker.login} href=\"#\">{liker.login},</a>)\n                    })\n                }\n\n               curtiram\n           \n            </div>\n\n            <p className=\"foto-info-legenda\">\n              <a className=\"foto-info-autor\">autor </a>\n                {\n                    this.props.foto.comentario\n                }\n            </p>\n\n            <ul className=\"foto-info-comentarios\">\n                {\n                    this.props.foto.comentarios.map(comentario => {\n                        return ( <li className=\"comentario\" key={comentario.id}>\n                                    <a className=\"foto-info-autor\">{comentario.login} </a>\n                                        {comentario.texto}\n                                </li>\n                        );\n                    })\n                }\n            </ul>\n          </div>\n        );\n    }\n}\n\nclass FotoAtualizacoes extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = {likeada : this.props.foto.likeada};\n    }\n\n    like(event){\n        event.preventDefault();\n        fetch(`http://localhost:8080/api/fotos/${this.props.foto.id}/like?X-AUTH-TOKEN=${localStorage.getItem('auth-token')}`,{method: 'POST'})\n            .then(response => {\n                if(response.ok){\n                    return response.json();\n                }else{\n                    throw new Error (\"Não foi possível realizar o like da foto\");\n                }\n            })\n            .then(liker => {\n                this.setState({likeada : !this.state.likeada});\n                Pubsub.publish('atualiza-liker', {fotoId:this.props.foto.id, liker});\n            });\n    }\n\n    render(){\n        return(\n            <section className=\"fotoAtualizacoes\">\n            <a onClick={this.like.bind(this)} className={this.state.likeada ? 'fotoAtualizacoes-like-ativo' : 'fotoAtualizacoes-like'}>Linkar</a>\n            <form className=\"fotoAtualizacoes-form\">\n              <input type=\"text\" placeholder=\"Adicione um comentário...\" className=\"fotoAtualizacoes-form-campo\"/>\n              <input type=\"submit\" value=\"Comentar!\" className=\"fotoAtualizacoes-form-submit\"/>\n            </form>\n\n          </section>\n        );\n    }\n}\n\nexport default class FotoItem extends Component {\n    render(){\n        return (\n            <div className=\"foto\">\n                <FotoHeader foto={this.props.foto}/>\n                <img alt=\"foto\" className=\"foto-src\" src={this.props.foto.urlFoto}/>\n                <FotoInfo foto={this.props.foto}/>\n                <FotoAtualizacoes foto={this.props.foto}/>\n            </div>   \n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}